<!DOCTYPE html>
<html>
<head>
<title>Cart</title>

<style>

body{
font-family:Arial;
background:#f4f6f8;
margin:0;
padding:0;
}

h2{
margin-top:20px;
}

#cart{
width:60%;
margin:auto;
}

.item{
display:flex;
justify-content:space-between;
align-items:center;
margin:10px 0;
padding:15px;
border-radius:8px;
background:white;
box-shadow:0 2px 6px rgba(0,0,0,0.1);
transition:0.2s;
}

.item:hover{
transform:scale(1.02);
}

.left{
font-size:18px;
}

.right{
display:flex;
align-items:center;
gap:10px;
}

.qty-btn{
padding:5px 10px;
background:#007bff;
color:white;
border:none;
cursor:pointer;
border-radius:4px;
}

.qty{
font-size:16px;
min-width:20px;
text-align:center;
}

.btn{
padding:8px 15px;
background:red;
color:white;
border:none;
cursor:pointer;
border-radius:5px;
}

.btn:hover{
background:darkred;
}

.checkout{
background:green;
margin-top:20px;
}

.checkout:hover{
background:darkgreen;
}

.empty{
text-align:center;
margin-top:50px;
font-size:20px;
color:gray;
}

#total{
margin-top:20px;
}

</style>

</head>
<body>

<h2 align="center">Your Cart</h2>

<div id="cart"></div>

<h3 align="center" id="total"></h3>

<center>
<button class="btn checkout" onclick="checkout()">Checkout</button>
</center>

<script>

let cart = JSON.parse(localStorage.getItem("cart")) || [];

function renderCart()
{

let cartDiv = document.getElementById("cart");

let total = 0;

cartDiv.innerHTML = "";

if(cart.length === 0)
{
cartDiv.innerHTML = "<div class='empty'>Your cart is empty</div>";
document.getElementById("total").innerText="";
return;
}

cart.forEach((item,index)=>{

if(!item.qty) item.qty = 1;

let itemTotal = item.price * item.qty;

total += itemTotal;

cartDiv.innerHTML += `

<div class="item">

<div class="left">
${item.name}<br>
₹${item.price} × ${item.qty} = ₹${itemTotal}
</div>

<div class="right">

<button class="qty-btn" onclick="changeQty(${index},-1)">-</button>

<div class="qty">${item.qty}</div>

<button class="qty-btn" onclick="changeQty(${index},1)">+</button>

<button class="btn" onclick="removeItem(${index})">Remove</button>

</div>

</div>

`;

});

document.getElementById("total").innerText = "Total = ₹" + total;

localStorage.setItem("cart", JSON.stringify(cart));

}

function changeQty(index,change)
{

cart[index].qty += change;

if(cart[index].qty <= 0)
{
cart.splice(index,1);
}

renderCart();

}

function removeItem(index)
{

cart.splice(index,1);

renderCart();

}

function checkout()
{
    if(cart.length === 0)
    {
        alert("Cart is empty");
        return;
    }

    // save cart total for payment page
    let total = 0;

    cart.forEach(item=>{
        total += item.price * (item.qty || 1);
    });

    localStorage.setItem("selectedBook", "Cart Items");
    localStorage.setItem("selectedPrice", total);

    window.location.href = "payment.html";
}

renderCart();

</script>

</body>
</html>