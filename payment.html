<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Secure Payment</title>
<style>
/* Reset */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', sans-serif;
}

body {
    background: #f4f6fb;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

/* Container */
.payment-container {
    background: white;
    width: 420px;
    padding: 35px;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    text-align: center;
}

/* Title */
h2 {
    margin-bottom: 25px;
    color: #111827;
}

/* Info */
.info p {
    font-size: 16px;
    margin: 8px 0;
}

.info strong {
    color: #f59e0b;
}

/* Payment Method Buttons */
.method-buttons {
    display: flex;
    gap: 10px;
    margin: 20px 0;
}

.method-buttons button {
    flex: 1;
    padding: 10px 0;
    border-radius: 30px;
    border: none;
    background: #e4e6eb;
    cursor: pointer;
    font-weight: 500;
    transition: 0.3s;
}

.method-buttons button:hover {
    background: #d0d3d8;
}

.method-buttons button.active {
    background: #f59e0b;
    color: white;
}

/* Payment Forms */
.payment-form {
    display: none;
    margin-top: 15px;
    text-align: left;
}

.payment-form input {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 14px;
}

/* Pay Button */
.pay-btn {
    width: 100%;
    padding: 12px;
    margin-top: 20px;
    border: none;
    border-radius: 30px;
    background: #f59e0b;
    color: white;
    font-size: 16px;
    cursor: pointer;
    transition: 0.3s;
}

.pay-btn:hover {
    background: #d97706;
    transform: translateY(-2px);
}

/* Loading & Success Messages */
.loading, .success {
    margin-top: 15px;
    font-weight: 600;
    display: none;
}

.loading {
    color: #555;
}

.success {
    color: green;
}

/* Responsive */
@media (max-width: 480px) {
    .payment-container {
        width: 90%;
        padding: 25px;
    }

    .method-buttons {
        flex-direction: column;
    }

    .method-buttons button {
        width: 100%;
    }
}
</style>
</head>
<body>

<div class="payment-container">
    <h2>Secure Payment</h2>

    <div class="info">
        <p><strong>Book:</strong> <span id="bookName"></span></p>
        <p><strong>Price:</strong> â‚¹<span id="bookPrice"></span></p>
    </div>

    <div class="method-buttons">
        <button id="cardBtn" onclick="selectMethod('card')">Card</button>
        <button id="upiBtn" onclick="selectMethod('upi')">UPI</button>
        <button id="codBtn" onclick="selectMethod('cod')">COD</button>
    </div>

    <div id="cardForm" class="payment-form">
        <input type="text" placeholder="Card Number">
        <input type="text" placeholder="Card Holder Name">
        <input type="text" placeholder="Expiry Date">
        <input type="password" placeholder="CVV">
    </div>

    <div id="upiForm" class="payment-form">
        <input type="text" placeholder="Enter UPI ID">
    </div>

    <button class="pay-btn" onclick="processPayment()">Pay Now</button>

    <div class="loading" id="loadingText">Processing Payment...</div>
    <div class="success" id="successText">Payment Successful! Redirecting...</div>
</div>

<script>
let name = localStorage.getItem("selectedBook");
let price = localStorage.getItem("selectedPrice");

let cart = JSON.parse(localStorage.getItem("cart")) || [];

// If coming from cart
if(cart.length > 0 && name === "Cart Items")
{
    let total = 0;

    cart.forEach(item=>{
        total += item.price * (item.qty || 1);
    });

    document.getElementById("bookName").textContent = "Cart Items (" + cart.length + ")";
    document.getElementById("bookPrice").textContent = total;
}
else
{
    document.getElementById("bookName").textContent = name;
    document.getElementById("bookPrice").textContent = price;
}

let selectedMethod = "";

// Select Payment Method
function selectMethod(method) {
    selectedMethod = method;

    document.getElementById("cardForm").style.display = "none";
    document.getElementById("upiForm").style.display = "none";

    document.getElementById("cardBtn").classList.remove("active");
    document.getElementById("upiBtn").classList.remove("active");
    document.getElementById("codBtn").classList.remove("active");

    if(method === "card") {
        document.getElementById("cardForm").style.display = "block";
        document.getElementById("cardBtn").classList.add("active");
    }
    if(method === "upi") {
        document.getElementById("upiForm").style.display = "block";
        document.getElementById("upiBtn").classList.add("active");
    }
    if(method === "cod") {
        document.getElementById("codBtn").classList.add("active");
    }
}

// Process Payment
function processPayment() {
    if(!selectedMethod) {
        alert("Please select payment method");
        return;
    }

    document.getElementById("loadingText").style.display = "block";

    setTimeout(() => {
        document.getElementById("loadingText").style.display = "none";
        document.getElementById("successText").style.display = "block";
    }, 1500);

   setTimeout(() => {

    localStorage.removeItem("cart");
    localStorage.removeItem("selectedBook");
    localStorage.removeItem("selectedPrice");

    window.location.href = "index.html";

}, 3000);
}
</script>

</body>
</html>